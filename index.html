<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–≠–ª–∏—Ç–Ω–∞—è –º–æ—Ä–∫–æ–≤–Ω–∞—è —Ñ–µ—Ä–º–∞</title>
    <style>
        * {
            box-sizing: border-box;
        }
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background: #f0f8ff;
            padding: 10px;
            margin: 0;
            touch-action: manipulation;
        }
        .container {
            display: flex;
            flex-direction: column;
            max-width: 800px;
            margin: 0 auto;
        }
        .garden {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            margin: 10px 0;
        }
        .plot {
            aspect-ratio: 1/1;
            border: 2px dashed #aaa;
            position: relative;
            cursor: pointer;
            background: #e9f5e9;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        .plant-icon {
            font-size: 30px;
            margin-bottom: 5px;
        }
        .inventory-section, .shop-section {
            border: 2px solid #4CAF50;
            padding: 10px;
            margin: 10px 0;
            border-radius: 10px;
            background: white;
        }
        .item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 8px 0;
            padding: 8px;
            background: #f8f8f8;
            border-radius: 5px;
        }
        button {
            padding: 8px 12px;
            background: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            min-width: 80px;
        }
        button:disabled {
            background: #cccccc;
        }
        .stats {
            font-size: 18px;
            margin: 10px 0;
            padding: 10px;
            background: white;
            border-radius: 10px;
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
        }
        .carrot-type {
            font-weight: bold;
        }
        .normal { color: #2E8B57; }
        .rare { color: #4169E1; }
        .epic { color: #9370DB; }
        .legendary { color: #FF8C00; }
        .progress-container {
            width: 80%;
            height: 6px;
            background: #ddd;
            margin-top: 5px;
            border-radius: 3px;
            overflow: hidden;
        }
        .progress {
            height: 100%;
            background: #4CAF50;
            width: 0%;
        }
        .selected {
            box-shadow: 0 0 0 3px #4CAF50;
        }
        .sell-all-btn {
            background: #FF6347;
            margin-top: 10px;
            width: 100%;
        }
        .water-btn {
            background: #1E90FF;
            margin-top: 5px;
        }
        .rarity-tag {
            font-size: 12px;
            padding: 2px 5px;
            border-radius: 3px;
            margin-left: 5px;
        }
        .common { background: #808080; color: white; }
        .rare { background: #4169E1; color: white; }
        .epic { background: #9370DB; color: white; }
        .legendary { background: #FF8C00; color: white; }
        .shop-timer {
            font-size: 14px;
            color: #666;
            margin-top: 10px;
        }
        @media (min-width: 600px) {
            .container {
                flex-direction: row;
                flex-wrap: wrap;
                justify-content: center;
            }
            .garden-container {
                order: 1;
                width: 60%;
            }
            .inventory-section {
                order: 2;
                width: 35%;
            }
            .shop-section {
                order: 3;
                width: 100%;
            }
            .garden {
                grid-template-columns: repeat(3, 120px);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="garden-container">
            <h2>–ì—Ä—è–¥–∫–∞</h2>
            <div class="garden" id="garden"></div>
        </div>
        
        <div class="stats">
            <span>–ë–∞–ª–∞–Ω—Å: <span id="money">0</span>¬¢</span>
            <span>–õ–µ–π–∫–∞: <span id="watering-can">–Ω–µ—Ç</span></span>
            <button class="sell-all-btn" onclick="startSellingAll()">–ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–¥–∞–∂–∞ (10 —Å–µ–∫)</button>
        </div>
        
        <div class="inventory-section">
            <h2>–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</h2>
            <h3>–°–µ–º–µ–Ω–∞</h3>
            <div id="seed-inventory"></div>
            <h3>–ú–æ—Ä–∫–æ–≤—å</h3>
            <div id="carrot-inventory"></div>
            <h3>–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã</h3>
            <div id="tools-inventory"></div>
        </div>
        
        <div class="shop-section">
            <h2>–ú–∞–≥–∞–∑–∏–Ω (–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ <span id="shop-timer">120</span> —Å–µ–∫)</h2>
            <div id="shop-items"></div>
            <div class="shop-timer">–°–ª–µ–¥—É—é—â–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: <span id="next-refresh">2:00</span></div>
            <div class="item">
                <span>–õ–µ–π–∫–∞ (–ø–æ–ª–∏–≤ -10 —Å–µ–∫)</span>
                <span>125¬¢</span>
                <button onclick="buyWateringCan()">–ö—É–ø–∏—Ç—å</button>
            </div>
        </div>
    </div>
    
    <script>
        // –ò–≥—Ä–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
        const gameData = {
            money: 50,
            seeds: {
                normal: 0,
                golden: 0,
                diamond: 0,
                rainbow: 0,
                electric: 0
            },
            carrots: [],
            plots: Array(9).fill(null),
            selectedSeed: null,
            isSelling: false,
            hasWateringCan: false,
            shopRefreshInterval: null,
            shopRefreshTime: 120, // 2 –º–∏–Ω—É—Ç—ã
            currentShopItems: []
        };
        
        // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –º–æ—Ä–∫–æ–≤–∏
        const carrotConfig = {
            normal: {
                name: "–û–±—ã—á–Ω–∞—è",
                rarity: "common",
                buyPrice: 20,
                growthTime: 20000, // 20 —Å–µ–∫
                weightRange: [0.5, 17],
                sellPrices: [
                    { max: 1, price: 15 },
                    { max: 5, price: 40 },
                    { max: 10, price: 150 },
                    { max: Infinity, price: 200 }
                ],
                spawnChance: 1.0
            },
            golden: {
                name: "–ó–æ–ª–æ—Ç–∞—è",
                rarity: "common",
                buyPrice: 200,
                growthTime: 40000, // 40 —Å–µ–∫
                weightRange: [2, 25],
                sellPrices: [
                    { max: 5, price: 250 },
                    { max: 10, price: 400 },
                    { max: 15, price: 600 },
                    { max: 19, price: 800 },
                    { max: Infinity, price: 1100 }
                ],
                spawnChance: 1.0
            },
            diamond: {
                name: "–ê–ª–º–∞–∑–Ω–∞—è",
                rarity: "rare",
                buyPrice: 2000,
                growthTime: 110000, // 110 —Å–µ–∫
                weightRange: [4, 19],
                sellPrices: [
                    { max: 8, price: 5000 },
                    { max: 12, price: 4000 },
                    { max: 16, price: 3000 },
                    { max: Infinity, price: 7000 }
                ],
                spawnChance: 0.25
            },
            rainbow: {
                name: "–†–∞–¥—É–∂–Ω–∞—è",
                rarity: "epic",
                buyPrice: 15000,
                growthTime: 250000, // 250 —Å–µ–∫
                weightRange: [9, 19],
                sellPrices: [
                    { max: 15, price: 17500 },
                    { max: Infinity, price: 25000 }
                ],
                spawnChance: 0.1,
                heavyWeightChance: 0.05 // 5% —à–∞–Ω—Å –ø–æ–ª—É—á–∏—Ç—å 10+ –∫–≥
            },
            electric: {
                name: "–≠–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∞—è",
                rarity: "legendary",
                buyPrice: 100000,
                growthTime: 1000000, // 1000 —Å–µ–∫
                weightRange: [50, 100],
                sellPrice: 200000,
                spawnChance: 0.01
            }
        };

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã
        function initGame() {
            initGarden();
            generateShopItems();
            startShopTimer();
            updateUI();
            setupEventListeners();
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≥—Ä—è–¥–∫–∏
        function initGarden() {
            const garden = document.getElementById('garden');
            garden.innerHTML = '';
            
            gameData.plots.forEach((plot, index) => {
                const plotEl = document.createElement('div');
                plotEl.className = 'plot';
                plotEl.dataset.index = index;
                garden.appendChild(plotEl);
            });
        }
        
        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–æ–≤–∞—Ä–æ–≤ –≤ –º–∞–≥–∞–∑–∏–Ω–µ
        function generateShopItems() {
            gameData.currentShopItems = [];
            const itemsCount = Math.floor(Math.random() * 4) + 2; // 2-5 –ø—Ä–µ–¥–º–µ—Ç–æ–≤
            
            for (let i = 0; i < itemsCount; i++) {
                const type = getRandomSeedType();
                gameData.currentShopItems.push(type);
            }
            
            updateShopUI();
        }
        
        // –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ª—É—á–∞–π–Ω–æ–≥–æ —Ç–∏–ø–∞ —Å–µ–º—è–Ω —Å —É—á–µ—Ç–æ–º —Ä–µ–¥–∫–æ—Å—Ç–∏
        function getRandomSeedType() {
            const rand = Math.random();
            let cumulativeChance = 0;
            
            for (const type in carrotConfig) {
                cumulativeChance += carrotConfig[type].spawnChance;
                if (rand <= cumulativeChance) {
                    return type;
                }
            }
            
            return 'normal'; // fallback
        }
        
        // –¢–∞–π–º–µ—Ä –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –º–∞–≥–∞–∑–∏–Ω–∞
        function startShopTimer() {
            let timeLeft = gameData.shopRefreshTime;
            
            gameData.shopRefreshInterval = setInterval(() => {
                timeLeft--;
                document.getElementById('shop-timer').textContent = timeLeft;
                
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                document.getElementById('next-refresh').textContent = 
                    `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
                
                if (timeLeft <= 0) {
                    generateShopItems();
                    timeLeft = gameData.shopRefreshTime;
                }
            }, 1000);
        }
        
        // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π
        function setupEventListeners() {
            document.querySelectorAll('.plot').forEach(plot => {
                // –î–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
                plot.addEventListener('touchstart', handlePlotTouch, { passive: false });
                // –î–ª—è –¥–µ—Å–∫—Ç–æ–ø–æ–≤
                plot.addEventListener('click', handlePlotClick);
            });
        }
        
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–∞—Å–∞–Ω–∏—è –Ω–∞ –≥—Ä—è–¥–∫–µ (–º–æ–±–∏–ª—å–Ω—ã–µ)
        function handlePlotTouch(e) {
            e.preventDefault();
            const plotIndex = parseInt(e.currentTarget.dataset.index);
            handlePlotAction(plotIndex);
        }
        
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–∞ –Ω–∞ –≥—Ä—è–¥–∫–µ (–¥–µ—Å–∫—Ç–æ–ø)
        function handlePlotClick(e) {
            const plotIndex = parseInt(e.currentTarget.dataset.index);
            handlePlotAction(plotIndex);
        }
        
        // –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –≥—Ä—è–¥–∫–æ–π
        function handlePlotAction(plotIndex) {
            const plot = gameData.plots[plotIndex];
            
            if (!plot) {
                // –ü—É—Å—Ç–∞—è –≥—Ä—è–¥–∫–∞ - –ø–æ–ø—ã—Ç–∫–∞ –ø–æ—Å–∞–¥–∏—Ç—å
                if (gameData.selectedSeed) {
                    plantCarrot(plotIndex, gameData.selectedSeed);
                } else {
                    alert("–°–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏—Ç–µ —Å–µ–º–µ–Ω–∞ –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ!");
                }
            } else if (plot.growing && gameData.hasWateringCan) {
                // –ü–æ–ª–∏–≤ —Ä–∞—Å—Ç—É—â–µ–π –º–æ—Ä–∫–æ–≤–∏
                waterCarrot(plotIndex);
            } else if (!plot.growing) {
                // –ì–æ—Ç–æ–≤–∞—è –º–æ—Ä–∫–æ–≤—å - —Å–±–æ—Ä
                harvestCarrot(plotIndex);
            } else {
                // –ú–æ—Ä–∫–æ–≤—å —Ä–∞—Å—Ç–µ—Ç - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
                const elapsed = Date.now() - plot.startTime;
                const remaining = Math.ceil((plot.growthTime - elapsed) / 1000);
                alert(`–ú–æ—Ä–∫–æ–≤—å —Ä–∞—Å—Ç–µ—Ç! –û—Å—Ç–∞–ª–æ—Å—å: ${remaining} —Å–µ–∫`);
            }
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
        function updateUI() {
            // –î–µ–Ω—å–≥–∏
            document.getElementById('money').textContent = gameData.money;
            
            // –õ–µ–π–∫–∞
            document.getElementById('watering-can').textContent = 
                gameData.hasWateringCan ? '–µ—Å—Ç—å' : '–Ω–µ—Ç';
            
            // –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å —Å–µ–º—è–Ω
            const seedInventory = document.getElementById('seed-inventory');
            seedInventory.innerHTML = '';
            
            Object.entries(gameData.seeds).forEach(([type, count]) => {
                if (count > 0) {
                    const config = carrotConfig[type];
                    const seedItem = document.createElement('div');
                    seedItem.className = `item ${type === gameData.selectedSeed ? 'selected' : ''}`;
                    seedItem.innerHTML = `
                        <span class="carrot-type ${config.rarity}">
                            ${config.name}
                            <span class="rarity-tag ${config.rarity}">${config.rarity}</span>
                            : ${count}
                        </span>
                        <button onclick="selectSeed('${type}')">–í—ã–±—Ä–∞—Ç—å</button>
                    `;
                    seedInventory.appendChild(seedItem);
                }
            });
            
            if (Object.values(gameData.seeds).every(count => count === 0)) {
                seedInventory.innerHTML = '<div>–ù–µ—Ç —Å–µ–º—è–Ω</div>';
            }
            
            // –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å –º–æ—Ä–∫–æ–≤–∏
            const carrotInventory = document.getElementById('carrot-inventory');
            if (gameData.carrots.length > 0) {
                carrotInventory.innerHTML = gameData.carrots.map((carrot, index) => {
                    const config = carrotConfig[carrot.type];
                    return `
                        <div class="item">
                            <span class="carrot-type ${config.rarity}">
                                ${getCarrotIcon(carrot.type)} ${carrot.weight}–∫–≥ 
                                (${config.name})
                                <span class="rarity-tag ${config.rarity}">${config.rarity}</span>
                            </span>
                            <button onclick="sellCarrot(${index})">${carrot.price}¬¢</button>
                        </div>
                    `;
                }).join('');
            } else {
                carrotInventory.innerHTML = '<div>–ù–µ—Ç –º–æ—Ä–∫–æ–≤–∏</div>';
            }
            
            // –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
            const toolsInventory = document.getElementById('tools-inventory');
            toolsInventory.innerHTML = `
                <div class="item">
                    <span>–õ–µ–π–∫–∞</span>
                    <span>${gameData.hasWateringCan ? '–ï—Å—Ç—å' : '–ù–µ—Ç'}</span>
                    ${gameData.hasWateringCan ? '<button class="water-btn" onclick="selectWateringCan()">–í—ã–±—Ä–∞—Ç—å</button>' : ''}
                </div>
            `;
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≥—Ä—è–¥–∫–∏
            gameData.plots.forEach((plot, index) => {
                const plotEl = document.querySelector(`.plot[data-index="${index}"]`);
                if (plot) {
                    plotEl.innerHTML = `
                        <div class="plant-icon">${getGrowthIcon(plot.type, plot.growing)}</div>
                        <div>${plot.growing ? '–†–∞—Å—Ç—ë—Ç...' : '–ì–æ—Ç–æ–≤–æ!'}</div>
                        ${plot.growing ? `
                            <div class="progress-container">
                                <div class="progress" id="progress-${index}"></div>
                            </div>
                            ${gameData.hasWateringCan ? '<button class="water-btn" onclick="waterCarrot(${index})">–ü–æ–ª–∏—Ç—å (-10 —Å–µ–∫)</button>' : ''}
                        ` : ''}
                    `;
                    
                    if (plot.growing) {
                        const elapsed = Date.now() - plot.startTime;
                        const progress = (elapsed / plot.growthTime) * 100;
                        const progressEl = document.getElementById(`progress-${index}`);
                        if (progressEl) {
                            progressEl.style.width = `${Math.min(progress, 100)}%`;
                        }
                    }
                } else {
                    plotEl.innerHTML = '<div>–ü—É—Å—Ç–æ</div>';
                }
            });
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–∞–≥–∞–∑–∏–Ω–∞
        function updateShopUI() {
            const shopItems = document.getElementById('shop-items');
            shopItems.innerHTML = '';
            
            gameData.currentShopItems.forEach(type => {
                const config = carrotConfig[type];
                const item = document.createElement('div');
                item.className = 'item';
                item.innerHTML = `
                    <span class="carrot-type ${config.rarity}">
                        ${config.name} <span class="rarity-tag ${config.rarity}">${config.rarity}</span>
                    </span>
                    <span>${config.buyPrice}¬¢</span>
                    <button onclick="buySeedFromShop('${type}')">–ö—É–ø–∏—Ç—å</button>
                `;
                shopItems.appendChild(item);
            });
        }
        
        // –í—ã–±–æ—Ä —Å–µ–º—è–Ω
        function selectSeed(type) {
            gameData.selectedSeed = type;
            updateUI();
        }
        
        // –í—ã–±–æ—Ä –ª–µ–π–∫–∏
        function selectWateringCan() {
            gameData.selectedSeed = null;
            updateUI();
        }
        
        // –ü–æ–∫—É–ø–∫–∞ —Å–µ–º—è–Ω –≤ –º–∞–≥–∞–∑–∏–Ω–µ
        function buySeedFromShop(type) {
            const config = carrotConfig[type];
            if (gameData.money >= config.buyPrice) {
                gameData.money -= config.buyPrice;
                gameData.seeds[type]++;
                updateUI();
            } else {
                alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–µ–Ω–µ–≥!");
            }
        }
        
        // –ü–æ–∫—É–ø–∫–∞ –ª–µ–π–∫–∏
        function buyWateringCan() {
            if (gameData.money >= 125) {
                gameData.money -= 125;
                gameData.hasWateringCan = true;
                updateUI();
            } else {
                alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–µ–Ω–µ–≥!");
            }
        }
        
        // –ü–æ—Å–∞–¥–∫–∞ –º–æ—Ä–∫–æ–≤–∏
        function plantCarrot(plotIndex, type) {
            if (gameData.seeds[type] <= 0) return;
            
            gameData.seeds[type]--;
            const growthTime = carrotConfig[type].growthTime;
            
            gameData.plots[plotIndex] = {
                type: type,
                growing: true,
                startTime: Date.now(),
                growthTime: growthTime,
                originalGrowthTime: growthTime
            };
            
            updateUI();
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä–æ—Å—Ç–∞
            const growthInterval = setInterval(() => {
                if (!gameData.plots[plotIndex]) {
                    clearInterval(growthInterval);
                    return;
                }
                
                const plot = gameData.plots[plotIndex];
                const elapsed = Date.now() - plot.startTime;
                
                if (elapsed >= plot.growthTime) {
                    gameData.plots[plotIndex].growing = false;
                    clearInterval(growthInterval);
                    updateUI();
                }
            }, 1000);
        }
        
        // –ü–æ–ª–∏–≤ –º–æ—Ä–∫–æ–≤–∏
        function waterCarrot(plotIndex) {
            const plot = gameData.plots[plotIndex];
            if (!plot || !plot.growing) return;
            
            plot.growthTime = Math.max(10000, plot.growthTime - 10000); // -10 —Å–µ–∫, –Ω–æ –Ω–µ –º–µ–Ω—å—à–µ 10 —Å–µ–∫
            updateUI();
        }
        
        // –°–±–æ—Ä —É—Ä–æ–∂–∞—è
        function harvestCarrot(plotIndex) {
            const plot = gameData.plots[plotIndex];
            if (!plot || plot.growing) return;
            
            const type = plot.type;
            let weight = getRandomWeight(type);
            
            // –û—Å–æ–±—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è —Ä–µ–¥–∫–∏—Ö –º–æ—Ä–∫–æ–≤–æ–∫
            if (type === 'rainbow' && Math.random() < carrotConfig.rainbow.heavyWeightChance) {
                weight = (Math.random() * 9 + 10).toFixed(1); // 10-19 –∫–≥
            }
            
            const price = calculatePrice(type, weight);
            
            gameData.carrots.push({
                type: type,
                weight: weight,
                price: price
            });
            
            gameData.plots[plotIndex] = null;
            updateUI();
        }
        
        // –ü—Ä–æ–¥–∞–∂–∞ –æ–¥–Ω–æ–π –º–æ—Ä–∫–æ–≤–∏
        function sellCarrot(index) {
            gameData.money += gameData.carrots[index].price;
            gameData.carrots.splice(index, 1);
            updateUI();
        }
        
        // –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–¥–∞–∂–∞ –≤—Å–µ–≥–æ (10 —Å–µ–∫)
        function startSellingAll() {
            if (gameData.isSelling || gameData.carrots.length === 0) return;
            
            gameData.isSelling = true;
            const sellBtn = document.querySelector('.sell-all-btn');
            sellBtn.disabled = true;
            sellBtn.textContent = "–ü—Ä–æ–¥–∞–∂–∞...";
            
            const totalValue = gameData.carrots.reduce((sum, carrot) => sum + carrot.price, 0);
            const carrotsCount = gameData.carrots.length;
            const stepTime = 10000 / carrotsCount; // 10 —Å–µ–∫ –Ω–∞ –≤—Å–µ
            
            let sold = 0;
            const sellInterval = setInterval(() => {
                if (gameData.carrots.length > 0) {
                    gameData.money += gameData.carrots[0].price;
                    gameData.carrots.shift();
                    sold++;
                    updateUI();
                }
                
                if (sold >= carrotsCount) {
                    clearInterval(sellInterval);
                    gameData.isSelling = false;
                    sellBtn.disabled = false;
                    sellBtn.textContent = "–ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–¥–∞–∂–∞ (10 —Å–µ–∫)";
                    alert(`–ü—Ä–æ–¥–∞–Ω–æ ${carrotsCount} –º–æ—Ä–∫–æ–≤–æ–∫ –∑–∞ ${totalValue}¬¢!`);
                }
            }, stepTime);
        }
        
        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ª—É—á–∞–π–Ω–æ–≥–æ –≤–µ—Å–∞
        function getRandomWeight(type) {
            const [min, max] = carrotConfig[type].weightRange;
            return (Math.random() * (max - min) + min).toFixed(1);
        }
        
        // –†–∞—Å—á–µ—Ç —Ü–µ–Ω—ã
        function calculatePrice(type, weight) {
            weight = parseFloat(weight);
            
            if (type === 'electric') {
                return carrotConfig.electric.sellPrice;
            }
            
            const priceTable = carrotConfig[type].sellPrices;
            
            for (const tier of priceTable) {
                if (weight <= tier.max) {
                    return tier.price;
                }
            }
            return priceTable[priceTable.length - 1].price;
        }
        
        // –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–∫–æ–Ω–∫–∏ –º–æ—Ä–∫–æ–≤–∏
        function getCarrotIcon(type) {
            switch (type) {
                case 'golden': return 'ü•ï‚ú®';
                case 'diamond': return 'üíéü•ï';
                case 'rainbow': return 'üåàü•ï';
                case 'electric': return '‚ö°ü•ï';
                default: return 'ü•ï';
            }
        }
        
        // –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–∫–æ–Ω–∫–∏ —Ä–æ—Å—Ç–∞
        function getGrowthIcon(type, growing) {
            return growing ? 'üå±' : getCarrotIcon(type);
        }
        
        // –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã
        window.onload = initGame;
    </script>
</body>
</html>
